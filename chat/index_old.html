<!DOCTYPE html>
<html lang="ja">
 <head>
     <meta charset="utf-8">
     <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
     <title>サイトタイトル</title>
 </head>
 <body>
    <style type='text/css'>
        .embeddedServiceHelpButton .helpButton .uiButton {
            background-color: #005290;
            font-family: "Arial", sans-serif;
        }
        .embeddedServiceHelpButton .helpButton .uiButton:focus {
            outline: 1px solid #005290;
        }
    </style>
    
    <script type='text/javascript' src='https://service.force.com/embeddedservice/5.0/esw.min.js'></script>
    <script type='text/javascript'>
        var initESW = function(gslbBaseURL) {
            embedded_svc.settings.displayHelpButton = true; //または false
            embedded_svc.settings.language = ''; //たとえば、「en」または「en-US」を入力します
    
            embedded_svc.settings.enabledFeatures = ['LiveAgent'];
            embedded_svc.settings.entryFeature = 'LiveAgent';
    
            embedded_svc.init(
                'https://dp0000000a24weas--sandbp2.sandbox.my.salesforce.com',
                'https://dp0000000a24weas--sandbp2.sandbox.my.site.com/',
                gslbBaseURL,
                '00Dp0000000A24W',
                'EinsteinBot',
                {
                    baseLiveAgentContentURL: 'https://c.la1-c1cs-ukb.salesforceliveagent.com/content',
                    deploymentId: '572p00000004CZp',
                    buttonId: '573p00000004Cfz',
                    baseLiveAgentURL: 'https://d.la1-c1cs-ukb.salesforceliveagent.com/chat',
                    eswLiveAgentDevName: 'EmbeddedServiceLiveAgent_Parent04Ip00000004CQxEAM_17f0bffddd5',
                    isOfflineSupportEnabled: false
                }
            );
        };
    
        if (!window.embedded_svc) {
            var s = document.createElement('script');
            s.setAttribute('src', 'https://dp0000000a24weas--sandbp2.sandbox.my.salesforce.com/embeddedservice/5.0/esw.min.js');
            s.onload = function() {
                initESW(null);
            };
            document.body.appendChild(s);
        } else {
            initESW('https://service.force.com');
        }
    </script>

<script type='text/javascript'>
// URL が「https://imoto.co.jp/?memberid=2000」の場合

var param = getParam('memberid'); //URLパラメータのMemberIDを取得

/**
 * Get the URL parameter value
 *
 * @param  name {string} パラメータのキー文字列
 * @return  url {url} 対象のURL文字列（任意）
 */
function getParam(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, " "));
}
    //エージェントに追加情報を送信し、チャットトランススクリプトの会員IDに値を登録する
    embedded_svc.settings.extraPrechatFormDetails = [{
      "label": "会員ID",
      "value": param,
      "displayToAgent": true,
      "transcriptFields":["MemberID__c"]
    }];
</script>
 <h1>チャットID取得検証</h1>
    <div>ID=1001</div> </body>
</html>